import json
import argparse
import os
import sys

def load_config(config_path):
    if not os.path.exists(config_path):
        print(f"âŒ ÙØ§ÛŒÙ„ Ù¾ÛŒÚ©Ø±Ø¨Ù†Ø¯ÛŒ Ù¾ÛŒØ¯Ø§ Ù†Ø´Ø¯: {config_path}")
        sys.exit(1)

    try:
        with open(config_path, "r", encoding="utf-8") as f:
            content = f.read().strip()
            if not content:
                print("âŒ ÙØ§ÛŒÙ„ Ù¾ÛŒÚ©Ø±Ø¨Ù†Ø¯ÛŒ Ø®Ø§Ù„ÛŒÙ‡!")
                sys.exit(1)
            return json.loads(content)
    except json.JSONDecodeError as e:
        print(f"âŒ Ø®Ø·Ø§ Ø¯Ø± Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ JSON: {e}")
        sys.exit(1)
    except Exception as e:
        print(f"âŒ Ø®Ø·Ø§ÛŒ ØºÛŒØ±Ù…Ù†ØªØ¸Ø±Ù‡ Ø¯Ø± Ø®ÙˆØ§Ù†Ø¯Ù† Ù¾ÛŒÚ©Ø±Ø¨Ù†Ø¯ÛŒ: {e}")
        sys.exit(1)

def main():
    parser = argparse.ArgumentParser()
    parser.add_argument("--config", required=True, help="Ø¢Ø¯Ø±Ø³ ÙØ§ÛŒÙ„ Ù¾ÛŒÚ©Ø±Ø¨Ù†Ø¯ÛŒ JSON")
    parser.add_argument("--apikey", required=True, help="Ú©Ù„ÛŒØ¯ API Ø¨Ø±Ø§ÛŒ Ø§ØªØµØ§Ù„")
    parser.add_argument("--debug", action="store_true", help="ÙØ¹Ø§Ù„â€ŒØ³Ø§Ø²ÛŒ Ø­Ø§Ù„Øª Ø¯ÛŒØ¨Ø§Ú¯")
    args = parser.parse_args()

    # Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ø§Ø² ÙØ§ÛŒÙ„ config
    settings = load_config(args.config)

    if args.debug:
        print("âœ… ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ù„ÙˆØ¯ Ø´Ø¯:")
        print(json.dumps(settings, indent=2, ensure_ascii=False))
        print(f"ğŸ”‘ Ú©Ù„ÛŒØ¯ API Ø¯Ø±ÛŒØ§ÙØªÛŒ: {'*' * len(args.apikey)}")

    # Ø§Ø¯Ø§Ù…Ù‡â€ŒÛŒ Ù¾Ø±Ø¯Ø§Ø²Ø´ Ø¨Ø§ settings Ùˆ apikey...

if __name__ == "__main__":
    main()
